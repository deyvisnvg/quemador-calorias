<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quemador de Calor√≠as</title>
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <main>
        <div class="wrapper">
            <details>
                <summary>‚≠êÔ∏è explicaci√≥n</summary>
                <p>
                    El libro, Convert Anything to Calories, lleg√≥ a la conclusi√≥n de
                    que, en promedio, una persona con un dedo indice de 10.8 cm^3 y de
                    11.7 gramos necesitar√° muuuchos clicks para conservar la l√≠nea. Se
                    requieren 16.7 micromoles de adenos√≠n trifosfato (la mol√©cula que
                    transporta energ√≠a entre las c√©lulas) para mover un gramo del cuerpo
                    por un segundo, y como hay 7.3 calor√≠as en un mol (la medida de
                    cantidad de una sustancia) de adenos√≠n trifosfato, en teor√≠a, cada
                    click del mouse deber√≠a quemar 1.42 calor√≠as. Aunque el c√°lculo
                    asume el movimiento de todo el m√∫sculo, por lo que la cantidad real
                    puede variar un poco.
                </p>
                <p>
                    Pero resulta que es s√°bado y tienes hambre. treinta minutos despu√©s
                    te llega una pizza (1,835kCal) con una coca (97kCal), tendr√≠as que
                    hacer 1,360,563 clicks para quemar la cena. Y c√≥mo es s√°bado
                    seguramente involucrar√° unas cuantas bebidas alcoh√≥licas: en un Gin
                    & Tonic (120kCal) hay 84,507 clicks, y 131,690.14 por cada cerveza
                    que consumas. En otras palabras, con 427 clicks en promedio por d√≠a,
                    la computadora no es un buen ejercicio.
                </p>
            </details>
            <h1>Quemador de calor√≠as</h1>
            <p class="result" id="result"></p>
            <p class="resultPend" id="resultPend">Total de calor√≠as a quemar: 1360563</p>
            <button id="burn" class="burn">üî•</button>
        </div>
    </main>

    <script>
        const createStore = (reducer, initialState) => { //Base de Redux
            let state = {
                initialState,
                calInicial: 1360563
            }

            let updater = () => { };
            const getState = () => state;

            const dispatch = (action) => {
                state = reducer(state, action);
                updater();
            };
            const subscribe = (listener) => {
                updater = listener;
                // window.resultPend.textContent = `Total de calor√≠as a quemar: 1360563`;
            };

            return {
                getState,
                dispatch,
                subscribe,
            };
        };

        const reducer = (state, action) => {
            // eval√∫a los compartamientos de mis acciones
            switch(action.type) {
                case 'BURN':
                    state.initialState += + 1.42;
                    state.calInicial -= 1.42;

                     return state;

                default:
                    return state
            }
            return action;
        };

        const store = createStore(reducer, 0);
        // store.dispatch() //Enviar Acciones
        // store.getState() //Estado de la aplicacion
        // store.subscribe() //

        store.subscribe(() => {
            // console.log("ha cambiado algo en el store", store.getState());
            window.result.textContent = `Has quemado ${store.getState().initialState} calor√≠as`;
            window.resultPend.textContent = `Calor√≠as Faltantes a quemar: ${store.getState().calInicial}`;
        });
        
        const burn = () => {
            store.dispatch({
                type: 'BURN',
                payload: 1.42
            });
        }

        window.burn.addEventListener('click', burn)

    </script>
</body>

</html>